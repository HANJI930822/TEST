<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>時事人生終極版</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id="scene-creation">
      <h1 class="creation-title">🧬 投胎模擬器 V17.0</h1>

      <div class="card">
        <div class="card-body">
          <div class="input-group">
            <label>✏️ 姓名</label>
            <input type="text" id="inp-name" placeholder="輸入姓名" maxlength="8" value="測試玩家" />
          </div>
          <div class="input-group">
            <label>🚻 性別</label>
            <select id="inp-gender">
              <option value="男">👨 男生</option>
              <option value="女">👩 女生</option>
              <option value="其他">🌈 其他</option>
            </select>
          </div>
        </div>
      </div>

      <h3 class="section-title">🎲 選擇出身背景 (點擊卡片選擇)</h3>
      <div id="origin-list"></div>

      <button class="btn-main" onclick="startGame()">🚀 開始人生冒險</button>
    </div>
    <div id="stats-allocation-screen" class="screen" style="display: none;">
    <div class="allocation-container">
        <h2>✨ 塑造你的角色</h2>
        <p class="desc-text">你有 <span id="free-points" class="highlight-point">50</span> 點天賦點數可自由分配</p>
        
        <div class="stats-group">
            <div class="stat-row" data-stat="intel">
                <span class="stat-label">🧠 智力</span>
                <button class="btn-stat btn-minus" onclick="adjustStat('intel', -1)">-</button>
                <span class="stat-value" id="alloc-intel">0</span>
                <button class="btn-stat btn-plus" onclick="adjustStat('intel', 1)">+</button>
            </div>
            
            <div class="stat-row" data-stat="charm">
                <span class="stat-label">✨ 魅力</span>
                <button class="btn-stat btn-minus" onclick="adjustStat('charm', -1)">-</button>
                <span class="stat-value" id="alloc-charm">0</span>
                <button class="btn-stat btn-plus" onclick="adjustStat('charm', 1)">+</button>
            </div>
            
            <div class="stat-row" data-stat="health">
                <span class="stat-label">💪 健康</span>
                <button class="btn-stat btn-minus" onclick="adjustStat('health', -1)">-</button>
                <span class="stat-value" id="alloc-health">0</span>
                <button class="btn-stat btn-plus" onclick="adjustStat('health', 1)">+</button>
            </div>

            <div class="stat-row" data-stat="money">
                <span class="stat-label">💰 財富</span>
                <button class="btn-stat btn-minus" onclick="adjustStat('money', -1)">-</button>
                <span class="stat-value" id="alloc-money">0</span>
                <button class="btn-stat btn-plus" onclick="adjustStat('money', 1)">+</button>
                <span class="stat-hint">(1點 = $2,000)</span>
            </div>
        </div>

        <button class="btn-primary start-btn" onclick="confirmAllocation()">開始人生</button>
    </div>
</div>
    <div id="scene-game">
      <div class="header">
        <div class="dashboard-wrapper">
          <div class="player-info-section">
            <div class="player-base">
              <div class="player-avatar" id="player-avatar">👶</div>
              <div class="player-text">
                <div class="player-name-line">
                  <span id="player-name">???</span>
                  <span style="font-size: 0.8em; color: var(--text-dim)">
                    <span id="age-display">0</span>歲</span
                  >
                </div>
                <div class="player-subtitle">
                  <span id="player-origin"></span> |
                  <span id="player-job"></span>
                </div>
              </div>
            </div>

            <div id="talent-display" style="margin-top: 8px"></div>
            <div id="trait-display" style="margin-top: 5px"></div>
          </div>

          <div class="skills-section">
            <div class="section-label" style="font-size: 0.8em; color: var(--accent); margin-bottom: 5px; text-align: right;">
              📊 技能狀態
            </div>
            <div id="skills-container" class="skills-grid-layout"></div>
          </div>
        </div>

        <div class="big-stat" id="money-display">$0</div>

        <div class="stat-grid">
          <div class="stat-item">
            <span>❤️ 健康</span><span class="stat-value" id="health">100</span>
          </div>
          <div class="stat-item">
            <span>😊 快樂</span><span class="stat-value" id="happy">80</span>
          </div>
          <div class="stat-item">
            <span>🧠 智力</span><span class="stat-value" id="intel">50</span>
          </div>
        </div>

        <div class="stamina-container">
          <div class="stamina-label">
            <span>⚡ 體力</span><span id="stamina-text">100/100</span>
          </div>
          <div class="progress-bg">
            <div id="stamina-bar" class="progress-fill"></div>
          </div>
        </div>

        <div class="status-alerts" id="status-alerts"></div>
      </div>

      <div id="page-home" class="page active">
        <div class="card">
          <div class="card-header">
            <span class="card-title">📅 人生階段：<span id="life-stage">嬰兒期</span></span>
          </div>
          <div class="card-body">
            <div class="btn-grid" id="action-buttons">
              </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-title">📜 人生動態</span>
          </div>
          <div class="card-body">
            <div id="game-log" class="log-box"></div>
            <button class="btn-main" onclick="nextYear()">
              🎂 下一歲 (體力回滿)
            </button>
          </div>
        </div>
      </div>

      <div id="page-career" class="page">
        <div class="card">
          <div class="card-header">
            <span class="card-title">💼 職業選擇</span>
          </div>
          <div class="card-body">
            <div style="color: var(--text-dim); margin-bottom: 15px; font-size: 0.9em;">
              💡 選擇職業後每年自動獲得薪水，不同職業有不同特殊效果
            </div>
            <div id="job-list"></div>
          </div>
        </div>
      </div>

      <div id="page-assets" class="page">
        <div class="card">
          <div class="card-header">
            <span class="card-title">🏎️ 車庫</span>
          </div>
          <div class="card-body" id="car-shop"></div>
        </div>
        <div class="card">
          <div class="card-header">
            <span class="card-title">🏘️ 房產</span>
          </div>
          <div class="card-body" id="house-shop"></div>
        </div>
        <div class="card">
          <div class="card-header">
            <span class="card-title">💎 奢侈品</span>
          </div>
          <div class="card-body" id="luxury-shop"></div>
        </div>
      </div>
      <div id="page-map" class="page">
        <div class="card">
          <div class="card-header">
            <span class="card-title">🗺️ 城市地圖</span>
            <span style="font-size:0.8em; float:right; color:var(--text-dim)">位置：<span id="current-location" style="color:var(--gold)">🏠 家</span></span>
          </div>
          <div class="card-body">
            <div id="map-grid" class="map-grid"></div>
            
            <div id="location-actions" style="margin-top: 20px; border-top: 1px solid #444; padding-top: 15px; display:none;">
                <div style="display:flex; align-items:center; margin-bottom:10px;">
                    <div id="loc-icon" style="font-size:2em; margin-right:10px;"></div>
                    <div>
                        <h3 id="loc-name" style="color:var(--gold); margin:0;">地點</h3>
                        <div id="loc-desc" style="color:#aaa; font-size:0.85em;">描述</div>
                    </div>
                </div>
                <div id="loc-btn-container" class="btn-grid"></div>
            </div>
          </div>
        </div>
      </div>
      <div id="page-social" class="page">
        <div class="card">
          <div class="card-header">
            <span class="card-title">💖 人際關係</span>
          </div>
          <div class="card-body">
            <div id="npc-list"></div>
            <div id="find-partner-area" style="margin-top: 15px; display: none">
              <button class="btn-main" onclick="findPartner()">
                📱 使用交友軟體 ($500)
              </button>
            </div>
          </div>
        </div>
      </div>

      <div id="page-profile" class="page">
        <div class="card">
          <div class="card-header">
            <span class="card-title">🏆 成就系統</span>
          </div>
          <div class="card-body">
            <div id="achievement-list"></div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-title">📊 人生統計</span>
          </div>
          <div class="card-body" id="stats-panel"></div>
        </div>

        <div class="card">
          <div class="card-body">
            <button class="btn-main" onclick="restartGame()">
              🔄 重新開始人生
            </button>
          </div>
        </div>
      </div>

      <div class="nav-bar">
        <div class="nav-item active" onclick="nav('home', event)">
          <span class="nav-icon">🏠</span>生活
        </div>
        <div class="nav-item" onclick="nav('map', event)">
          <span class="nav-icon">🗺️</span>地圖
        </div>
        <div class="nav-item" onclick="nav('career', event)">
          <span class="nav-icon">💼</span>職業
        </div>
        <div class="nav-item" onclick="nav('assets', event)">
          <span class="nav-icon">🏎️</span>資產
        </div>
        <div class="nav-item" onclick="nav('social', event)">
          <span class="nav-icon">💖</span>社交
        </div>
        <div class="nav-item" onclick="nav('profile', event)">
          <span class="nav-icon">🏆</span>成就
        </div>
      </div>
    </div>

    <div id="event-modal" class="modal-overlay" onclick="if (event.target === this) closeModal();">
      <div class="modal-box">
        <div class="modal-title" id="ev-title"></div>
        <div class="modal-desc" id="ev-desc"></div>
        <button class="modal-btn" id="btn-choice-a">A</button>
        <button class="modal-btn" id="btn-choice-b">B</button>
      </div>
    </div>
    
    <div id="ending-overlay" class="modal-overlay" style="z-index: 400; display: none; align-items: center; justify-content: center;">
        <div class="modal-box" style="text-align: center; background: linear-gradient(135deg, #1a1a2e, #16213e); border: 2px solid var(--gold);">
          <div style="font-size: 3em; margin-bottom: 10px" id="ending-icon">💀</div>
          <h2 style="color: var(--gold); margin-bottom: 10px" id="ending-title">結局標題</h2>
          <p style="color: #ddd; line-height: 1.6; margin-bottom: 20px" id="ending-desc">結局描述...</p>
          <div id="ending-stats" style="background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 0.9em;"></div>
          <button class="btn-main" onclick="location.reload()">🔄 重新開始人生</button>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="game.js"></script>
  </body>
</html>